# DiskCleaner

**DiskCleaner** — это утилита на C# для автоматического удаления старых файлов при переполнении диска. Программа анализирует уровень заполненности диска и удаляет самые старые файлы в указанных папках, чтобы освободить необходимое место. Вся работа логируется в ежедневные лог-файлы.

---

## Возможности

- Мониторинг использования диска.
- Удаление старых файлов в нескольких папках (рекурсивно).
- Поддержка конфигурации через `config.json`.
- Создание конфигурации автоматически, если она отсутствует.
- Ведение логов в папке `logs`, с отдельным логом на каждый день.
- Автоматическое удаление логов старше 10 дней.
- Текстовые метки в логах (`[INFO]`, `[ERR]`).

---

## Конфигурация

Файл `config.json` автоматически создается при первом запуске в директории с программой. Пример содержимого:

```json
{
  "Folders": [
    "D:\\Videos",
    "D:\\Records\\Cams"
  ],
  "DiskLetter": "D",
  "MaxDiskUsagePercent": 90,
  "MinFreeSpaceAfterCleanupMB": 800
}
```
---

## Поля:
| Поле                         | Описание                                                                                               |
| ---------------------------- | ------------------------------------------------------------------------------------------------------ |
| `Folders`                    | Список папок, в которых будет производиться поиск и удаление файлов. Поддерживается рекурсивный поиск. |
| `DiskLetter`                 | Буква диска, за которым нужно следить (например, `"D"`).                                               |
| `MaxDiskUsagePercent`        | Максимально допустимый процент заполнения диска. Если превышен — запускается очистка.                  |
| `MinFreeSpaceAfterCleanupMB` | Целевой минимум свободного места на диске после очистки (в мегабайтах).                                |

---

## Логи

- Все логи сохраняются в папку logs рядом с исполняемым файлом.
- Каждый лог — отдельный файл с именем log_YYYY-MM-DD.txt.
- Автоматически удаляются логи старше 10 дней.

---

## Примечания
- Программа предназначена для запуска через Планировщик заданий Windows (Task Scheduler) для регулярной очистки.
- Убедитесь, что у пользователя достаточно прав для удаления файлов в указанных папках.